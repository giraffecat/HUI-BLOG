{"remainingRequest":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/src/views/article/Article.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/src/views/article/Article.vue","mtime":1655599010394},{"path":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/node_modules/cache-loader/dist/cjs.js","mtime":1654979193161},{"path":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/node_modules/babel-loader/lib/index.js","mtime":1654979188012},{"path":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/node_modules/cache-loader/dist/cjs.js","mtime":1654979193161},{"path":"/Users/zhonghui/Desktop/Hui Blog/blog-admin/admin/node_modules/vue-loader/lib/index.js","mtime":1654979235508}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGltYWdlQ29udmVyc2lvbiBmcm9tICJpbWFnZS1jb252ZXJzaW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBwYXRoID0gdGhpcy4kcm91dGUucGF0aDsKICAgIGNvbnN0IGFyciA9IHBhdGguc3BsaXQoIi8iKTsKICAgIGNvbnN0IGFydGljbGVJZCA9IGFyclsyXTsKICAgIGlmIChhcnRpY2xlSWQpIHsKICAgICAgdGhpcy5heGlvcy5nZXQoIi9hZG1pbi9hcnRpY2xlcy8iICsgYXJ0aWNsZUlkKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIHRoaXMuYXJ0aWNsZSA9IGRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBhcnRpY2xlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXJ0aWNsZSIpOwogICAgICBpZiAoYXJ0aWNsZSkgewogICAgICAgIHRoaXMuYXJ0aWNsZSA9IEpTT04ucGFyc2UoYXJ0aWNsZSk7CiAgICAgIH0KICAgIH0KICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8v5paH56ug6Ieq5Yqo5L+d5a2Y5Yqf6IO9CiAgICAvLyB0aGlzLmF1dG9TYXZlQXJ0aWNsZSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBhZGRPckVkaXQ6IGZhbHNlLAogICAgICBhdXRvU2F2ZTogdHJ1ZSwKICAgICAgY2F0ZWdvcnlOYW1lOiAiIiwKICAgICAgdGFnTmFtZTogIiIsCiAgICAgIGNhdGVnb3J5TGlzdDogW10sCiAgICAgIHRhZ0xpc3Q6IFtdLAogICAgICB0eXBlTGlzdDogWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6IDEsCiAgICAgICAgICBkZXNjOiAi5Y6f5YibIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogMiwKICAgICAgICAgIGRlc2M6ICLovazovb0iCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgZGVzYzogIue/u+ivkSIKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGFydGljbGU6IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBhcnRpY2xlVGl0bGU6IHRoaXMuJG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoIllZWVktTU0tREQiKSwKICAgICAgICBhcnRpY2xlQ29udGVudDogIiIsCiAgICAgICAgYXJ0aWNsZUNvdmVyOiAiIiwKICAgICAgICBjYXRlZ29yeU5hbWU6IG51bGwsCiAgICAgICAgdGFnTmFtZUxpc3Q6IFtdLAogICAgICAgIG9yaWdpbmFsVXJsOiAiIiwKICAgICAgICBpc1RvcDogMCwKICAgICAgICB0eXBlOiAxLAogICAgICAgIHN0YXR1czogMQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbGlzdENhdGVnb3JpZXMoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYWRtaW4vY2F0ZWdvcmllcy9zZWFyY2giKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJjYXRlZ29yeSIsIGRhdGEpCiAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGxpc3RUYWdzKCkgewogICAgICB0aGlzLmF4aW9zLmdldCgiL2FkbWluL3RhZ3Mvc2VhcmNoIikudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLnRhZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5Nb2RlbCgpIHsKICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlVGl0bGUudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH6aKY5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMoKTsKICAgICAgdGhpcy5saXN0VGFncygpOwogICAgICB0aGlzLmFkZE9yRWRpdCA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkQ292ZXIocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2coInVwbG9hZENvdmVyIiwgcmVzcG9uc2UpCiAgICAgIAogICAgICB0aGlzLmFydGljbGUuYXJ0aWNsZUNvdmVyID0gcmVzcG9uc2UuZGF0YTsKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJiZWZvcmVVcGxvYWQiLGZpbGUpCgogICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgaWYgKGZpbGUuc2l6ZSAvIDEwMjQgPCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkgewogICAgICAgICAgcmVzb2x2ZShmaWxlKTsKICAgICAgICB9CiAgICAgICAgLy8g5Y6L57yp5YiwMjAwS0Is6L+Z6YeM55qEMjAw5bCx5piv6KaB5Y6L57yp55qE5aSn5bCPLOWPr+iHquWumuS5iQogICAgICAgIGltYWdlQ29udmVyc2lvbgogICAgICAgICAgLmNvbXByZXNzQWNjdXJhdGVseShmaWxlLCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRJbWcocG9zLCBmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWRJbWciLGZpbGUpCgogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgaWYgKGZpbGUuc2l6ZSAvIDEwMjQgPCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkgewogICAgICAgIGZvcm1kYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUpOwogICAgICAgIGNvbnNvbGUubG9nKCJmb3JtZGF0YSIsIGZvcm1kYXRhKQoKICAgICAgICB0aGlzLmF4aW9zCiAgICAgICAgICAucG9zdCgiL2FkbWluL2FydGljbGVzL2ltYWdlcyIsIGZvcm1kYXRhKQogICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJJbWEiKQogICAgICAgICAgICB0aGlzLiRyZWZzLm1kLiRpbWcyVXJsKHBvcywgZGF0YS5kYXRhKTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWOi+e8qeWIsDIwMEtCLOi/memHjOeahDIwMOWwseaYr+imgeWOi+e8qeeahOWkp+Wwjyzlj6/oh6rlrprkuYkKICAgICAgICAgICAgY29uc29sZS5sb2coImZvcm1kYXRhIiwgZm9ybWRhdGEpCgogICAgICAgIGltYWdlQ29udmVyc2lvbgogICAgICAgICAgLmNvbXByZXNzQWNjdXJhdGVseShmaWxlLCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgKICAgICAgICAgICAgICAiZmlsZSIsCiAgICAgICAgICAgICAgbmV3IHdpbmRvdy5GaWxlKFtyZXNdLCBmaWxlLm5hbWUsIHsgdHlwZTogZmlsZS50eXBlIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgICAgICAucG9zdCgiL2FkbWluL2FydGljbGVzL2ltYWdlcyIsIGZvcm1kYXRhKQogICAgICAgICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkltYWdlZGF0YSIsZGF0YSkKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMubWQuJGltZzJVcmwocG9zLCBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlQXJ0aWNsZURyYWZ0KCkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DmoIfpopjkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5hcnRpY2xlLnN0YXR1cyA9IDM7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL2FkbWluL2FydGljbGVzIiwgdGhpcy5hcnRpY2xlKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y6I2J56i/5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/neWtmOiNieeov+Wksei0pSIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8v5YWz6Zet6Ieq5Yqo5L+d5a2Y5Yqf6IO9CiAgICAgIHRoaXMuYXV0b1NhdmUgPSBmYWxzZTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGVBcnRpY2xlKCkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DmoIfpopjkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWIhuexu+S4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH562+5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvdmVyLnRyaW0oKSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWwgemdouS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygiYXJ0aWNsZSIsdGhpcy5hcnRpY2xlKQogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hZG1pbi9hcnRpY2xlcyIsIHRoaXMuYXJ0aWNsZSkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYWRkT3JFZGl0ID0gZmFsc2U7CiAgICAgIH0pOwogICAgICAvL+WFs+mXreiHquWKqOS/neWtmOWKn+iDvQogICAgICB0aGlzLmF1dG9TYXZlID0gZmFsc2U7CiAgICB9LAogICAgYXV0b1NhdmVBcnRpY2xlKCkgewogICAgICAvLyDoh6rliqjkuIrkvKDmlofnq6AKICAgICAgaWYgKAogICAgICAgIHRoaXMuYXV0b1NhdmUgJiYKICAgICAgICB0aGlzLmFydGljbGUuYXJ0aWNsZVRpdGxlLnRyaW0oKSAhPSAiIiAmJgogICAgICAgIHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgIT0gIiIgJiYKICAgICAgICB0aGlzLmFydGljbGUuaWQgIT0gbnVsbAogICAgICApIHsKICAgICAgICB0aGlzLmF4aW9zCiAgICAgICAgICAucG9zdCgiL2FkbWluL2FydGljbGVzIiwgdGhpcy5hcnRpY2xlKQogICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICB0aXRsZTogIuaIkOWKnyIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6Ieq5Yqo5L+d5a2Y5oiQ5YqfIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6Ieq5Yqo5L+d5a2Y5aSx6LSlIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyDkv53lrZjmnKzlnLDmlofnq6DorrDlvZUKICAgICAgaWYgKHRoaXMuYXV0b1NhdmUgJiYgdGhpcy5hcnRpY2xlLmlkID09IG51bGwpIHsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhcnRpY2xlIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5hcnRpY2xlKSk7CiAgICAgIH0KICAgIH0sCiAgICBzZWFyY2hDYXRlZ29yaWVzKGtleXdvcmRzLCBjYikgewogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2FkbWluL2NhdGVnb3JpZXMvc2VhcmNoIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGtleXdvcmRzOiBrZXl3b3JkcwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICBjYihkYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdENhdGVnb3JpZXMoaXRlbSkgewogICAgICB0aGlzLmFkZENhdGVnb3J5KHsKICAgICAgICBjYXRlZ29yeU5hbWU6IGl0ZW0uY2F0ZWdvcnlOYW1lCiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVDYXRlZ29yeSgpIHsKICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlOYW1lLnRyaW0oKSAhPSAiIikgewogICAgICAgIHRoaXMuYWRkQ2F0ZWdvcnkoewogICAgICAgICAgY2F0ZWdvcnlOYW1lOiB0aGlzLmNhdGVnb3J5TmFtZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2F0ZWdvcnlOYW1lID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGRDYXRlZ29yeShpdGVtKSB7CiAgICAgIHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPSBpdGVtLmNhdGVnb3J5TmFtZTsKICAgIH0sCiAgICByZW1vdmVDYXRlZ29yeSgpIHsKICAgICAgdGhpcy5hcnRpY2xlLmNhdGVnb3J5TmFtZSA9IG51bGw7CiAgICB9LAogICAgc2VhcmNoVGFncyhrZXl3b3JkcywgY2IpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9hZG1pbi90YWdzL3NlYXJjaCIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBrZXl3b3Jkczoga2V5d29yZHMKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgY2IoZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RUYWcoaXRlbSkgewogICAgICB0aGlzLmFkZFRhZyh7CiAgICAgICAgdGFnTmFtZTogaXRlbS50YWdOYW1lCiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVUYWcoKSB7CiAgICAgIGlmICh0aGlzLnRhZ05hbWUudHJpbSgpICE9ICIiKSB7CiAgICAgICAgdGhpcy5hZGRUYWcoewogICAgICAgICAgdGFnTmFtZTogdGhpcy50YWdOYW1lCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50YWdOYW1lID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBhZGRUYWcoaXRlbSkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0LmluZGV4T2YoaXRlbS50YWdOYW1lKSA9PSAtMSkgewogICAgICAgIHRoaXMuYXJ0aWNsZS50YWdOYW1lTGlzdC5wdXNoKGl0ZW0udGFnTmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVUYWcoaXRlbSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXJ0aWNsZS50YWdOYW1lTGlzdC5pbmRleE9mKGl0ZW0pOwogICAgICB0aGlzLmFydGljbGUudGFnTmFtZUxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0YWdDbGFzcygpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXJ0aWNsZS50YWdOYW1lTGlzdC5pbmRleE9mKGl0ZW0udGFnTmFtZSk7CiAgICAgICAgcmV0dXJuIGluZGV4ICE9IC0xID8gInRhZy1pdGVtLXNlbGVjdCIgOiAidGFnLWl0ZW0iOwogICAgICB9OwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Article.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <div class=\"title\">{{ this.$route.name }}</div>\n    <!-- 文章标题 -->\n    <div class=\"article-title-container\">\n      <el-input\n        v-model=\"article.articleTitle\"\n        size=\"medium\"\n        placeholder=\"输入文章标题\"\n      />\n      <el-button\n        type=\"danger\"\n        size=\"medium\"\n        class=\"save-btn\"\n        @click=\"saveArticleDraft\"\n        v-if=\"article.id == null || article.status == 3\"\n      >\n        保存草稿\n      </el-button>\n      <el-button\n        type=\"danger\"\n        size=\"medium\"\n        @click=\"openModel\"\n        style=\"margin-left:10px\"\n      >\n        发布文章\n      </el-button>\n    </div>\n    <!-- 文章内容 -->\n    <mavon-editor\n      ref=\"md\"\n      v-model=\"article.articleContent\"\n      @imgAdd=\"uploadImg\"\n      style=\"height:calc(100vh - 260px)\"\n    />\n    <!-- 添加文章对话框 -->\n    <el-dialog :visible.sync=\"addOrEdit\" width=\"40%\" top=\"3vh\">\n      <div class=\"dialog-title-container\" slot=\"title\">\n        发布文章\n      </div>\n      <!-- 文章数据 -->\n      <el-form label-width=\"80px\" size=\"medium\" :model=\"article\">\n        <!-- 文章分类 -->\n        <el-form-item label=\"文章分类\">\n          <el-tag\n            type=\"success\"\n            v-show=\"article.categoryName\"\n            style=\"margin:0 1rem 0 0\"\n            :closable=\"true\"\n            @close=\"removeCategory\"\n          >\n            {{ article.categoryName }}\n          </el-tag>\n          <!-- 分类选项 -->\n          <el-popover\n            placement=\"bottom-start\"\n            width=\"460\"\n            trigger=\"click\"\n            v-if=\"!article.categoryName\"\n          >\n            <div class=\"popover-title\">分类</div>\n            <!-- 搜索框 -->\n            <el-autocomplete\n              style=\"width:100%\"\n              v-model=\"categoryName\"\n              :fetch-suggestions=\"searchCategories\"\n              placeholder=\"请输入分类名搜索，enter可添加自定义分类\"\n              :trigger-on-focus=\"false\"\n              @keyup.enter.native=\"saveCategory\"\n              @select=\"handleSelectCategories\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.categoryName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 分类 -->\n            <div class=\"popover-container\">\n              <div\n                v-for=\"item of categoryList\"\n                :key=\"item.id\"\n                class=\"category-item\"\n                @click=\"addCategory(item)\"\n              >\n                {{ item.categoryName }}\n              </div>\n            </div>\n            <el-button type=\"success\" plain slot=\"reference\" size=\"small\">\n              添加分类\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <!-- 文章标签 -->\n        <el-form-item label=\"文章标签\">\n          <el-tag\n            v-for=\"(item, index) of article.tagNameList\"\n            :key=\"index\"\n            style=\"margin:0 1rem 0 0\"\n            :closable=\"true\"\n            @close=\"removeTag(item)\"\n          >\n            {{ item }}\n          </el-tag>\n          <!-- 标签选项 -->\n          <el-popover\n            placement=\"bottom-start\"\n            width=\"460\"\n            trigger=\"click\"\n            v-if=\"article.tagNameList.length < 3\"\n          >\n            <div class=\"popover-title\">标签</div>\n            <!-- 搜索框 -->\n            <el-autocomplete\n              style=\"width:100%\"\n              v-model=\"tagName\"\n              :fetch-suggestions=\"searchTags\"\n              placeholder=\"请输入标签名搜索，enter可添加自定义标签\"\n              :trigger-on-focus=\"false\"\n              @keyup.enter.native=\"saveTag\"\n              @select=\"handleSelectTag\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.tagName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 标签 -->\n            <div class=\"popover-container\">\n              <div style=\"margin-bottom:1rem\">添加标签</div>\n              <el-tag\n                v-for=\"(item, index) of tagList\"\n                :key=\"index\"\n                :class=\"tagClass(item)\"\n                @click=\"addTag(item)\"\n              >\n                {{ item.tagName }}\n              </el-tag>\n            </div>\n            <el-button type=\"primary\" plain slot=\"reference\" size=\"small\">\n              添加标签\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <el-form-item label=\"文章类型\">\n          <el-select v-model=\"article.type\" placeholder=\"请选择类型\">\n            <el-option\n              v-for=\"item in typeList\"\n              :key=\"item.type\"\n              :label=\"item.desc\"\n              :value=\"item.type\"\n            />\n          </el-select>\n        </el-form-item>\n        <!-- 文章类型 -->\n        <el-form-item label=\"原文地址\" v-if=\"article.type != 1\">\n          <el-input\n            v-model=\"article.originalUrl\"\n            placeholder=\"请填写原文链接\"\n          />\n        </el-form-item>\n        <el-form-item label=\"上传封面\">\n          <el-upload\n            class=\"upload-cover\"\n            drag\n            action=\"/admin/articles/images\"\n            multiple\n            :before-upload=\"beforeUpload\"\n            :on-success=\"uploadCover\"\n          >\n            <i class=\"el-icon-upload\" v-if=\"article.articleCover == ''\" />\n            <div class=\"el-upload__text\" v-if=\"article.articleCover == ''\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n            <img\n              v-else\n              :src=\"article.articleCover\"\n              width=\"360px\"\n              height=\"180px\"\n            />\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"置顶\">\n          <el-switch\n            v-model=\"article.isTop\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#F4F4F5\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n          />\n        </el-form-item>\n        <el-form-item label=\"发布形式\">\n          <el-radio-group v-model=\"article.status\">\n            <el-radio :label=\"1\">公开</el-radio>\n            <el-radio :label=\"2\">私密</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"addOrEdit = false\">取 消</el-button>\n        <el-button type=\"danger\" @click=\"saveOrUpdateArticle\">\n          发 表\n        </el-button>\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n\n<script>\nimport * as imageConversion from \"image-conversion\";\nexport default {\n  created() {\n    const path = this.$route.path;\n    const arr = path.split(\"/\");\n    const articleId = arr[2];\n    if (articleId) {\n      this.axios.get(\"/admin/articles/\" + articleId).then(({ data }) => {\n        this.article = data.data;\n      });\n    } else {\n      const article = sessionStorage.getItem(\"article\");\n      if (article) {\n        this.article = JSON.parse(article);\n      }\n    }\n  },\n  destroyed() {\n    //文章自动保存功能\n    // this.autoSaveArticle();\n  },\n  data: function() {\n    return {\n      addOrEdit: false,\n      autoSave: true,\n      categoryName: \"\",\n      tagName: \"\",\n      categoryList: [],\n      tagList: [],\n      typeList: [\n        {\n          type: 1,\n          desc: \"原创\"\n        },\n        {\n          type: 2,\n          desc: \"转载\"\n        },\n        {\n          type: 3,\n          desc: \"翻译\"\n        }\n      ],\n      article: {\n        id: null,\n        articleTitle: this.$moment(new Date()).format(\"YYYY-MM-DD\"),\n        articleContent: \"\",\n        articleCover: \"\",\n        categoryName: null,\n        tagNameList: [],\n        originalUrl: \"\",\n        isTop: 0,\n        type: 1,\n        status: 1\n      }\n    };\n  },\n  methods: {\n    listCategories() {\n      this.axios.get(\"/admin/categories/search\").then(({ data }) => {\n        // console.log(\"category\", data)\n        this.categoryList = data.data;\n      });\n    },\n    listTags() {\n      this.axios.get(\"/admin/tags/search\").then(({ data }) => {\n        this.tagList = data.data;\n      });\n    },\n    openModel() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.listCategories();\n      this.listTags();\n      this.addOrEdit = true;\n    },\n    uploadCover(response) {\n      console.log(\"uploadCover\", response)\n      \n      this.article.articleCover = response.data;\n    },\n    beforeUpload(file) {\n        console.log(\"beforeUpload\",file)\n\n      return new Promise(resolve => {\n        if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n          resolve(file);\n        }\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\n        imageConversion\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\n          .then(res => {\n            resolve(res);\n          });\n      });\n    },\n    uploadImg(pos, file) {\n      console.log(\"uploadImg\",file)\n\n      var formdata = new FormData();\n      if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n        formdata.append(\"file\", file);\n        console.log(\"formdata\", formdata)\n\n        this.axios\n          .post(\"/admin/articles/images\", formdata)\n          .then(({ data }) => {\n            console.log(\"Ima\")\n            this.$refs.md.$img2Url(pos, data.data);\n          });\n      } else {\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\n            console.log(\"formdata\", formdata)\n\n        imageConversion\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\n          .then(res => {\n            formdata.append(\n              \"file\",\n              new window.File([res], file.name, { type: file.type })\n            );\n            this.axios\n              .post(\"/admin/articles/images\", formdata)\n              .then(({ data }) => {\n                console.log(\"Imagedata\",data)\n                this.$refs.md.$img2Url(pos, data.data);\n              });\n          });\n      }\n    },\n    saveArticleDraft() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.article.status = 3;\n      this.axios.post(\"/admin/articles\", this.article).then(({ data }) => {\n        if (data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: \"保存草稿成功\"\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: \"保存草稿失败\"\n          });\n        }\n      });\n      //关闭自动保存功能\n      this.autoSave = false;\n    },\n    saveOrUpdateArticle() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      if (this.article.categoryName == null) {\n        this.$message.error(\"文章分类不能为空\");\n        return false;\n      }\n      if (this.article.tagNameList.length == 0) {\n        this.$message.error(\"文章标签不能为空\");\n        return false;\n      }\n      if (this.article.articleCover.trim() == \"\") {\n        this.$message.error(\"文章封面不能为空\");\n        return false;\n      }\n      console.log(\"article\",this.article)\n      this.axios.post(\"/admin/articles\", this.article).then(({ data }) => {\n        console.log(data)\n        if (data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: data.message\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: data.message\n          });\n        }\n        this.addOrEdit = false;\n      });\n      //关闭自动保存功能\n      this.autoSave = false;\n    },\n    autoSaveArticle() {\n      // 自动上传文章\n      if (\n        this.autoSave &&\n        this.article.articleTitle.trim() != \"\" &&\n        this.article.articleContent.trim() != \"\" &&\n        this.article.id != null\n      ) {\n        this.axios\n          .post(\"/admin/articles\", this.article)\n          .then(({ data }) => {\n            if (data.flag) {\n              this.$notify.success({\n                title: \"成功\",\n                message: \"自动保存成功\"\n              });\n            } else {\n              this.$notify.error({\n                title: \"失败\",\n                message: \"自动保存失败\"\n              });\n            }\n          });\n      }\n      // 保存本地文章记录\n      if (this.autoSave && this.article.id == null) {\n        sessionStorage.setItem(\"article\", JSON.stringify(this.article));\n      }\n    },\n    searchCategories(keywords, cb) {\n      this.axios\n        .get(\"/admin/categories/search\", {\n          params: {\n            keywords: keywords\n          }\n        })\n        .then(({ data }) => {\n          cb(data.data);\n        });\n    },\n    handleSelectCategories(item) {\n      this.addCategory({\n        categoryName: item.categoryName\n      });\n    },\n    saveCategory() {\n      if (this.categoryName.trim() != \"\") {\n        this.addCategory({\n          categoryName: this.categoryName\n        });\n        this.categoryName = \"\";\n      }\n    },\n    addCategory(item) {\n      this.article.categoryName = item.categoryName;\n    },\n    removeCategory() {\n      this.article.categoryName = null;\n    },\n    searchTags(keywords, cb) {\n      this.axios\n        .get(\"/admin/tags/search\", {\n          params: {\n            keywords: keywords\n          }\n        })\n        .then(({ data }) => {\n          cb(data.data);\n        });\n    },\n    handleSelectTag(item) {\n      this.addTag({\n        tagName: item.tagName\n      });\n    },\n    saveTag() {\n      if (this.tagName.trim() != \"\") {\n        this.addTag({\n          tagName: this.tagName\n        });\n        this.tagName = \"\";\n      }\n    },\n    addTag(item) {\n      if (this.article.tagNameList.indexOf(item.tagName) == -1) {\n        this.article.tagNameList.push(item.tagName);\n      }\n    },\n    removeTag(item) {\n      const index = this.article.tagNameList.indexOf(item);\n      this.article.tagNameList.splice(index, 1);\n    }\n  },\n  computed: {\n    tagClass() {\n      return function(item) {\n        const index = this.article.tagNameList.indexOf(item.tagName);\n        return index != -1 ? \"tag-item-select\" : \"tag-item\";\n      };\n    }\n  }\n};\n</script>\n\n<style scoped>\n.article-title-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.25rem;\n  margin-top: 2.25rem;\n}\n.save-btn {\n  margin-left: 0.75rem;\n  background: #fff;\n  color: #f56c6c;\n}\n.tag-item {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: pointer;\n}\n.tag-item-select {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: not-allowed;\n  color: #ccccd8 !important;\n}\n.category-item {\n  cursor: pointer;\n  padding: 0.6rem 0.5rem;\n}\n.category-item:hover {\n  background-color: #f0f9eb;\n  color: #67c23a;\n}\n.popover-title {\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.popover-container {\n  margin-top: 1rem;\n  height: 260px;\n  overflow-y: auto;\n}\n</style>\n"]}]}